<!DOCTYPE html>
<html>

<head>
    <title>Schoemans Support Network</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="icon" type="image/png" href="Images/favicon.png">

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <style>
        body {
            margin: 0;
            font-family: 'Montserrat', sans-serif;
            background: var(--bg);
            color: var(--text);
            transition: background 0.3s, color 0.3s;
        }

        #map {
            height: 90vh;
            width: 100%;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background: var(--bg);
        }

        .toggle-btn {
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            color: var(--btn-text);
            background: var(--btn-bg);
        }

        :root {
            --bg: #fff;
            --text: #222;
            --btn-bg: #2596be;
            --btn-text: #fff;
            --highlight: rgba(0, 0, 0, 0.3);
        }

        .dark-mode {
            --bg: #1e1e1e;
            --text: #f5f5f5;
            --btn-bg: #3a3a3a;
            --btn-text: #fff;
            --highlight: rgba(255, 255, 255, 0.3);
        }

        .leaflet-popup-content {
            max-height: 300px;
            overflow-y: auto;
        }

        .leaflet-popup-content::-webkit-scrollbar {
            width: 6px;
        }

        .leaflet-popup-content::-webkit-scrollbar-thumb {
            background-color: #888;
            border-radius: 4px;
        }

        .leaflet-popup-content::-webkit-scrollbar-thumb:hover {
            background-color: #555;
        }
    </style>
</head>

<body>
    <div class="header">
        <h2>
            <img src="Images/schomans-logo.png" alt="logo" style="height: 60px; width: auto; vertical-align: middle;">
            Schoemans Support Network
        </h2>
        <button id="toggleMode" class="toggle-btn">Switch to Dark Mode</button>
    </div>

    <div id="map"></div>

    <script>
        var map = L.map('map').setView([-22.56, 17.08], 6);

        const lightLayer = L.tileLayer(
            'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
            { attribution: '© OpenStreetMap contributors' }
        ).addTo(map);

        const darkLayer = L.tileLayer(
            'https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}',
            { maxZoom: 16, attribution: 'Tiles © Esri — Esri, DeLorme, NAVTEQ' }
        );

        const regionCenters = {
            "Hardap": [-24.5, 17.0],
            "Karas": [-27.0, 17.3],
            "Omaheke": [-21.8, 19.2],
            "Otjozondjupa": [-20.5, 17.0],
            "Erongo": [-22.2, 15.0],
            "Kunene": [-19.0, 13.8],
            "Oshikoto": [-18.1, 16.0],
            "Oshana": [-17.8, 15.9],
            "Omusati": [-17.6, 14.9],
            "Ohangwena": [-17.4, 16.3],
            "Kavango West": [-18.2, 18.0],
            "Kavango East": [-18.0, 20.2],
            "Zambezi": [-17.5, 24.3]
        };

        const branches = [
            {
                name: "Windhoek Branch",
                coords: [-22.56, 17.08],
                regions: ["Hardap", "Karas", "Omaheke", "Otjozondjupa"],
                details: `
          <div style="max-height:250px;overflow-y:auto;line-height:1.4;">
            <p><b>Technical Manager:</b> Mr. Meyer Nel<br>
            <p><b>Field Engineers:</b> 20<br>
            <b>Administrators:</b> 3<br>
            <b>Sales Consultants:</b> 7</p>

            <b>Towns Supported</b><br><br>

            <b>Hardap Region</b><br>
            Mariental, Gibeon, Kalkrand, Maltahöhe, Rehoboth, Stampriet, Hoachanas, Leonardville, Gochas<br><br>

            <b>//Karas Region</b><br>
            Keetmanshoop, Lüderitz, Karasburg, Oranjemund, Bethanie, Aroab, Aus, Ariamsvlei, Noordoewer, Grunau<br><br>

            <b>Omaheke Region</b><br>
            Gobabis, Otjinene, Epukiro, Witvlei, Leonardville, Eiseb, Talismanis<br><br>

            <b>Otjozondjupa Region</b><br>
            Otjiwarongo, Okahandja, Otavi, Grootfontein, Okakarara, Hochfeld, Ovitoto, Okamatapati
          </div>
        `
            },
            {
                name: "Walvis Bay Branch",
                coords: [-22.9576, 14.5056],
                regions: ["Erongo", "Kunene"],
                details: `
          <div style="max-height:250px;overflow-y:auto;line-height:1.4;">
            <p><b>Branch Manager:</b> Ms. Lucretia Fourie<br>
            <b>Field Engineers:</b> 2<br>
            <b>Administrative Assistants:</b> 1<br>
            <b>Sales Consultants:</b> 1</p>

            <b>Towns Supported</b><br><br>

            <b>Erongo Region</b><br>
            Swakopmund, Henties Bay, Arandis, Usakos, Karibib, Omaruru, Spitzkoppe, Uis<br><br>

            <b>Kunene Region (Partial – up to Sesfontein)</b><br>
            Khorixas, Kamanjab, Sesfontein
          </div>
        `
            },
            {
                name: "Oshakati Branch",
                coords: [-17.7883, 15.7049],
                regions: ["Oshikoto", "Oshana", "Omusati", "Ohangwena", "Kavango West", "Kavango East"],
                details: `
          <div style="max-height:250px;overflow-y:auto;line-height:1.4;">
            <p><b>Branch Manager:</b> Mr. Gerhard Moolman<br>
            <b>Field Engineers:</b> 3<br>
            <b>Administrative Assistants:</b> 2<br>
            <b>Sales Consultants:</b> 1</p>

            <b>Towns Supported</b><br><br>

            <b>Oshikoto Region</b><br>
            Tsumeb, Eengodi, Okankolo, Onayena, Oniipa, Onyaanya, Onyuulaye, Oshivelo, Oshigambo, Omuthiya, Onyati, Tsinsabis<br><br>

            <b>Oshana Region</b><br>
            Eheke, Okalongo, Okatana, Ondangwa, Ongwediva, Onamutai, Onayena, Ompundja<br><br>

            <b>Omusati Region</b><br>
            Outapi, Okahao, Oshikuku, Ruacana<br><br>

            <b>Notable Settlements & Villages</b><br>
            Elim, Ogongo, Okalongo, Omakange, Onamatanga, Onandjaba, Omafa, Onamutai, Onesi, Oshifo, Tsandi<br><br>

            <b>Ohangwena Region</b><br>
            Eenhana, Endola, Engela, Epembe, Helao Nafidi, Okongo, Omafo, Omulonga, Omungwelume, Ondobe, Ondangwa, Ongha, Onamutai, Onhuno, Onhuno West, Oshikango<br><br>

            <b>Kavango West Region</b><br>
            Nkurenkuru, Bunya, Katwitwi, Mpungu, Musese, Ncamagoro, Nkamagoro<br><br>

            <b>Kavango East Region</b><br>
            Rundu, Divundu, Mukwe, Ndiyona, Shamvura<br><br>

            <b>Zambezi Region (Caprivi Strip)</b><br>
            Katima Mulilo, Impalila, Kongola<br><br>

            <b>Kunene Region</b><br>
            Opuwo, Kamanjab, Khorixas, Namutoni, Okanguati, Okaukuejo, Outjo, Sesfontein
          </div>
        `
            }
        ];

        let activeRings = [];

        function clearHighlights() {
            activeRings.forEach(r => map.removeLayer(r));
            activeRings = [];
        }

        function highlightRegions(regionList) {
            clearHighlights();
            regionList.forEach(region => {
                if (regionCenters[region]) {
                    const ring = L.circle(regionCenters[region], {
                        radius: 80000,
                        color: 'var(--text)',
                        fillColor: 'var(--highlight)',
                        fillOpacity: 0.5,
                        weight: 2
                    }).addTo(map);
                    activeRings.push(ring);
                }
            });
        }

        branches.forEach(b => {
            const marker = L.marker(b.coords).addTo(map);
            marker.bindPopup(`<b>${b.name}</b><br>${b.details}`);
            marker.on('click', () => highlightRegions(b.regions));
        });

        // Dark Mode
        let darkMode = false;
        const btn = document.getElementById('toggleMode');
        btn.onclick = () => {
            if (!darkMode) {
                map.removeLayer(lightLayer);
                darkLayer.addTo(map);
                document.body.classList.add('dark-mode');
                btn.textContent = 'Switch to Light Mode';
            } else {
                map.removeLayer(darkLayer);
                lightLayer.addTo(map);
                document.body.classList.remove('dark-mode');
                btn.textContent = 'Switch to Dark Mode';
            }
            darkMode = !darkMode;
        };
    </script>
</body>

</html>
